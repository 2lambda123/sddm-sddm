CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

PROJECT(SDDM)

SET(CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/cmake;${CMAKE_MODULE_PATH}")
SET(CMAKE_AUTOMOC ON)

ADD_DEFINITIONS(-Wall -march=native -O2 -g -std=c++11)

# Qt
FIND_PACKAGE(Qt4 REQUIRED)
IF(QT_FOUND)
  SET(QT_USE_QTDECLARATIVE TRUE)
  INCLUDE(${QT_USE_FILE})
  INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR} ${CMAKE_SOURCE_DIR}/src)
ELSE()
  MESSAGE(FATAL_ERROR "Qt not found! Please make sure Qt is installed.")
ENDIF(QT_FOUND)

# PAM
FIND_PACKAGE(PAM REQUIRED)
IF(PAM_FOUND)
  INCLUDE_DIRECTORIES(${PAM_INCLUDE_DIR})
ELSE()
  MESSAGE(FATAL_ERROR "PAM not found!")
ENDIF(PAM_FOUND)

# X11
FIND_PACKAGE(X11 REQUIRED)

SET(SOURCES
  src/Authenticator.cpp
  src/Configuration.cpp
  src/Cookie.cpp
  src/DisplayManager.cpp
  src/LockFile.cpp
  src/Main.cpp
  src/SessionManager.cpp
)

ADD_EXECUTABLE(sddm ${SOURCES})
TARGET_LINK_LIBRARIES(sddm ${PAM_LIBRARIES} ${QT_LIBRARIES} ${X11_X11_LIB})
